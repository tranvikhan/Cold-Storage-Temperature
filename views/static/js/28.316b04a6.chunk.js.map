{"version":3,"sources":["components/AppMenu.js","helpers/webNotification.js","components/LeftSidebar.js"],"names":["MenuItemWithChildren","item","linkClassNames","subMenuClassNames","activatedMenuItemIds","Icon","icon","className","classNames","indexOf","id","to","aria-expanded","badge","variant","text","name","children","map","child","i","Fragment","key","active","MenuItem","linkClassName","MenuItemLink","path","AppMenu","componentDidMount","props","menu","menuItems","initMenu","history","listen","location","action","changeActiveMenuFromLocation","componentDidUpdate","prevProps","this","mode","menuRef","MetisMenu","on","event","window","addEventListener","menuClick","e","target","contains","hide","detail","shownElement","removeEventListener","isHorizontal","activatedKeys","RoomList","currentRoom","roles","includes","role","header","Component","defaultProps","withRouter","connect","state","exports","showNotification","title","content","Notification","body","dir","timestamp","BASE_URL","require","io","UserProfile","dispatch","useDispatch","addToast","useToasts","webSocket","React","useRef","useEffect","user","accessToken","getRoomList","getNotificationList","console","log","current","disconnect","checkDispatch","room_id","currentRoom_id","checkAnoUserAction","actionBy","_id","socket","emit","data","room","getCubeDataSuccess","getSensorDataSuccess","getCurrentDataSuccess","getAreaDataSuccess","message","pushNotification","permission","appearance","autoDismiss","updateNotification","updateAccessSuccess","access","AddAccessSuccess","deleteAccessSuccess","addAreaSuccess","area","currentArea","updateAreaSuccess","deleteAreaSuccess","addMonitorSuccess","monitors","updateMonitorSuccess","monitor","deleteMonitorSuccess","addActivateSuccess","activate","deleteActivateSuccess","updateRoomSuccess","deleteRoomSuccess","addSensorSuccess","structure","updateSensorSuccess","deleteSensorSuccess","src","avatar","alt","username","fullname","data-toggle","tag","right","divider","SideNav","LeftSidebar","document","handleOtherClick","componentWillUnmount","menuNodeRef","isMobileOnly","classList","remove","handleClick","bind","isCondensed","ref","node","Auth","loading","error","RoomArea"],"mappings":"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","file":"static/js/28.316b04a6.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport MetisMenu from 'metismenujs/dist/metismenujs';\r\n\r\nimport { initMenu, changeActiveMenuFromLocation } from '../redux/actions';\r\n\r\n\r\nconst MenuItemWithChildren = ({ item, linkClassNames, subMenuClassNames, activatedMenuItemIds }) => {\r\n    const Icon = item.icon || null;\r\n    return (\r\n        <li className={classNames('side-nav-item', { 'active mm-active': activatedMenuItemIds.indexOf(item.id) >= 0 })}>\r\n            <Link\r\n                to=\"/\"\r\n                className={classNames('side-sub-nav-link', linkClassNames)}\r\n                aria-expanded={activatedMenuItemIds.indexOf(item.id) >= 0}>\r\n                {item.icon && <Icon />}\r\n                {item.badge && (\r\n                    <span className={`badge badge-${item.badge.variant} float-right`}>{item.badge.text}</span>\r\n                )}\r\n                <span> {item.name} </span>\r\n                <span className=\"menu-arrow\"></span>\r\n            </Link>\r\n\r\n            <ul\r\n                className={classNames(subMenuClassNames, {\r\n                    'mm-collapse mm-show': activatedMenuItemIds.indexOf(item.id) >= 0,\r\n                })}\r\n                aria-expanded={activatedMenuItemIds.indexOf(item.id) >= 0}>\r\n                {item.children.map((child, i) => {\r\n                    return (\r\n                        <React.Fragment key={i}>\r\n                            {child.children ? (\r\n                                <MenuItemWithChildren\r\n                                    item={child}\r\n                                    linkClassNames={classNames({ active: activatedMenuItemIds.indexOf(child.id) >= 0 })}\r\n                                    activatedMenuItemIds={activatedMenuItemIds}\r\n                                    subMenuClassNames=\"side-nav-third-level\"\r\n                                />\r\n                            ) : (\r\n                                    <MenuItem\r\n                                        item={child}\r\n                                        className={classNames({ active: activatedMenuItemIds.indexOf(child.id) >= 0 })}\r\n                                        linkClassName={classNames({ active: activatedMenuItemIds.indexOf(child.id) >= 0 })}\r\n                                    />\r\n                                )}\r\n                        </React.Fragment>\r\n                    );\r\n                })}\r\n            </ul>\r\n        </li>\r\n    );\r\n};\r\n\r\nconst MenuItem = ({ item, className, linkClassName }) => {\r\n    return (\r\n        <li className={classNames('side-nav-item', className)}>\r\n            <MenuItemLink item={item} className={linkClassName} />\r\n        </li>\r\n    );\r\n};\r\n\r\nconst MenuItemLink = ({ item, className }) => {\r\n    const Icon = item.icon || null;\r\n    return (\r\n        <Link to={item.path} className={classNames('side-nav-link-ref', 'side-sub-nav-link', className)}>\r\n            {item.icon && <Icon />}\r\n            {item.badge && <span className={`font-size-12 badge badge-${item.badge.variant} float-right`}>{item.badge.text}</span>}\r\n            <span> {item.name} </span>\r\n        </Link>\r\n    );\r\n};\r\n\r\n/**\r\n * Renders the application menu\r\n */\r\n\r\nclass AppMenu extends Component {\r\n    static defaultProps = {\r\n        mode: 'vertical',\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        if (!this.props.menu.menuItems) this.props.initMenu();\r\n        else this.initMenu();\r\n\r\n        this.props.history.listen((location, action) => {\r\n            this.props.changeActiveMenuFromLocation();\r\n        });\r\n    };\r\n\r\n    componentDidUpdate = prevProps => {\r\n        if (\r\n            !prevProps.menu.menuItems ||\r\n            (prevProps.menu.menuItems && prevProps.menu.menuItems !== this.props.menu.menuItems)\r\n        ) {\r\n            this.initMenu();\r\n        }\r\n\r\n        if (!this.props.menu.activatedMenuItemIds) {\r\n            this.props.changeActiveMenuFromLocation();\r\n        }\r\n    };\r\n\r\n    initMenu() {\r\n        if (this.props.mode === 'horizontal') {\r\n            const menuRef = new MetisMenu('#menu-bar').on('shown.metisMenu', function (event) {\r\n                window.addEventListener('click', function menuClick(e) {\r\n                    if (!event.target.contains(e.target)) {\r\n                        menuRef.hide(event.detail.shownElement);\r\n                        window.removeEventListener('click', menuClick);\r\n                    }\r\n                });\r\n            });\r\n        } else {\r\n            new MetisMenu('#menu-bar');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const isHorizontal = this.props.mode === 'horizontal';\r\n        const activatedKeys = isHorizontal ? [] : this.props.menu ? (this.props.menu.activatedMenuItemIds? this.props.menu.activatedMenuItemIds :[]) : [] || [];\r\n\r\n        return (\r\n            <React.Fragment>\r\n                \r\n                        {this.props.menu && this.props.menu.menuItems &&  (\r\n                            <ul className=\"metismenu\" id=\"menu-bar\">\r\n                                {this.props.menu.menuItems.map((item, i) => {\r\n                                    if(this.props.RoomList.currentRoom)\r\n                                        if(item.roles.includes(this.props.RoomList.currentRoom.role))\r\n                                    return (\r\n                                        <React.Fragment key={item.id}>\r\n                                            {item.header && !isHorizontal && (\r\n                                                <li className=\"menu-title\" key={i + '-el'}>\r\n                                                    {item.header}\r\n                                                </li>\r\n                                            )}\r\n\r\n                                            {item.children ? (\r\n                                                <MenuItemWithChildren\r\n                                                    item={item}\r\n                                                    subMenuClassNames=\"nav-second-level\"\r\n                                                    activatedMenuItemIds={activatedKeys}\r\n                                                    linkClassNames=\"side-nav-link\"\r\n                                                />\r\n                                            ) : (\r\n                                                    <MenuItem\r\n                                                        item={item}\r\n                                                        className={classNames({ 'mm-active': activatedKeys.indexOf(item.id) >= 0 })}\r\n                                                        linkClassName=\"side-nav-link\"\r\n                                                    />\r\n                                                )}\r\n                                        </React.Fragment>\r\n                                    );\r\n                                })}\r\n                            </ul>\r\n                        )}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        menu: state.AppMenu,\r\n        RoomList: state.RoomList\r\n    };\r\n};\r\nexport default withRouter(\r\n    connect(\r\n        mapStateToProps,\r\n        { initMenu, changeActiveMenuFromLocation }\r\n    )(AppMenu)\r\n);\r\n","exports.showNotification= (title,content)=> {\r\n    var options = {\r\n    body: content,\r\n    icon: \"http://vikhan.tk/assets/img/logo1.png\",\r\n    dir: \"ltr\",\r\n    timestamp: 3000\r\n    };\r\n    new Notification(title, options);\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { isMobileOnly } from \"react-device-detect\";\r\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\r\nimport \"react-perfect-scrollbar/dist/css/styles.css\";\r\n\r\nimport {\r\n  UncontrolledDropdown,\r\n  DropdownMenu,\r\n  DropdownToggle,\r\n  DropdownItem,\r\n} from \"reactstrap\";\r\nimport * as FeatherIcon from \"react-feather\";\r\n\r\nimport AppMenu from \"./AppMenu\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  getNotificationList,\r\n  getRoomList,\r\n  getAreaDataSuccess,\r\n  getCubeDataSuccess,\r\n  getCurrentDataSuccess,\r\n  updateRoomSuccess,\r\n  pushNotification,\r\n  updateNotification,\r\n  getSensorDataSuccess,\r\n  getRoomListFailed,\r\n  getNotificationListFailed,\r\n  deleteRoomSuccess,\r\n  addSensorSuccess,\r\n  deleteSensorSuccess,\r\n  updateSensorSuccess,\r\n  addAreaSuccess,\r\n  updateAreaSuccess,\r\n  deleteAreaSuccess,\r\n  addMonitorSuccess,\r\n  updateMonitorSuccess,\r\n  deleteMonitorSuccess,\r\n  addActivateSuccess,\r\n  deleteActivateSuccess,\r\n  updateAccessSuccess,\r\n  AddAccessSuccess,\r\n  deleteAccessSuccess,\r\n  getAreas,\r\n} from \"redux/actions\";\r\nimport { showNotification } from \"helpers/webNotification\";\r\n/* import MySocket from 'socket.controller'; */\r\nimport { useToasts } from \"react-toast-notifications\";\r\nconst { BASE_URL } = require(\"constants/apiConfig\");\r\n\r\nvar io = require(\"socket.io-client\");\r\n/**\r\n * User Widget\r\n */\r\nconst UserProfile = (props) => {\r\n  const dispatch = useDispatch();\r\n  const { addToast } = useToasts();\r\n  const webSocket = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    if (props.user && props.user.accessToken) {\r\n      dispatch(getRoomList(props.user));\r\n      dispatch(getNotificationList(props.user));\r\n    } else {\r\n      console.log(\"Disconnect\");\r\n      if (webSocket.current) webSocket.current.disconnect();\r\n      webSocket.current = null;\r\n    }\r\n    return () => {\r\n      console.log(\"Disconnect\");\r\n      if (webSocket.current) webSocket.current.disconnect();\r\n      webSocket.current = null;\r\n    };\r\n  }, [props.user]);\r\n\r\n  const checkDispatch = (room_id, action) => {\r\n    if (props.currentRoom_id === room_id) {\r\n      dispatch(action);\r\n    }\r\n  };\r\n\r\n  const checkAnoUserAction = (room_id, actionBy, action) => {\r\n    if (props.currentRoom_id === room_id && actionBy != props.user.user._id) {\r\n      dispatch(action);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (props.user.accessToken && props.currentRoom_id) {\r\n      if (webSocket.current) webSocket.current.disconnect();\r\n      webSocket.current = io.connect(BASE_URL);\r\n      console.log(\"Connect\");\r\n      const socket = webSocket.current;\r\n      console.log(\r\n        \"Socket io Client run socket client with room: \",\r\n        props.currentRoom_id\r\n      );\r\n\r\n      socket.on(\"connect\", function () {\r\n        console.log(\"Socket io Client  Connected\");\r\n        socket.emit(\"login\", props.user.accessToken);\r\n      });\r\n\r\n      socket.on(\"data_cube_room\", function (data) {\r\n        checkDispatch(data.room, getCubeDataSuccess(data));\r\n        console.log(\"Socket io Client Cube\", data);\r\n      });\r\n      socket.on(\"data_sensor\", function (data) {\r\n        checkDispatch(data.room, getSensorDataSuccess(data));\r\n        console.log(\"Socket io Client Sensor\", data);\r\n      });\r\n\r\n      socket.on(\"data_room\", function (data) {\r\n        checkDispatch(data.room, getCurrentDataSuccess(data));\r\n        console.log(\"Socket io Client Curent Data\", data);\r\n      });\r\n      socket.on(\"log\", function (data) {\r\n        console.log(\"Socket io Client Log\", data);\r\n      });\r\n\r\n      socket.on(\"data_area\", function (data) {\r\n        checkDispatch(data.room, getAreaDataSuccess(data));\r\n        console.log(\"Socket io Client Area\", data);\r\n      });\r\n\r\n      socket.on(\"notification\", function (data) {\r\n        if (data.message == \"add\") {\r\n          dispatch(pushNotification(data.data));\r\n\r\n          if (Notification.permission == \"granted\") {\r\n            showNotification(\"Quản lý nhiệt độ kho lạnh\", data.data.content);\r\n          } else {\r\n            addToast(data.data.content, {\r\n              appearance: \"warning\",\r\n              autoDismiss: true,\r\n            });\r\n          }\r\n        }\r\n        if (data.message == \"update\") {\r\n          dispatch(updateNotification(data.data._id, data.data));\r\n        }\r\n        //console.log('Socket io Client Notification',data);\r\n      });\r\n\r\n      socket.on(\"access\", function (data) {\r\n        console.log(data);\r\n        if (data.message == \"accepted\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            updateAccessSuccess(data.data.access)\r\n          );\r\n        }\r\n        if (data.message == \"invite\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            AddAccessSuccess(data.data.access)\r\n          );\r\n        }\r\n        if (data.message == \"add\") {\r\n          if (\r\n            props.user &&\r\n            data.data.access.user &&\r\n            data.data.access.user._id === props.user.user._id\r\n          ) {\r\n            socket.emit(\"join-room\", \"room\" + data.data.room._id);\r\n            dispatch(getRoomList(props.user));\r\n          }\r\n        }\r\n        if (data.message == \"edit\") {\r\n          if (\r\n            props.user &&\r\n            data.data.access.user &&\r\n            data.data.access.user._id !== props.user.user._id\r\n          ) {\r\n            checkAnoUserAction(\r\n              data.data.room._id,\r\n              data.data.actionBy,\r\n              updateAccessSuccess(data.data.access)\r\n            );\r\n          } else {\r\n            dispatch(getRoomList(props.user));\r\n          }\r\n        }\r\n        if (data.message == \"delete\") {\r\n          if (\r\n            props.user &&\r\n            data.data.access.user &&\r\n            data.data.access.user._id !== props.user.user._id\r\n          ) {\r\n            checkAnoUserAction(\r\n              data.data.room._id,\r\n              data.data.actionBy,\r\n              deleteAccessSuccess(data.data.access._id)\r\n            );\r\n          } else {\r\n            socket.emit(\"leave-room\", \"room\" + data.data.room._id);\r\n            dispatch(getRoomList(props.user));\r\n          }\r\n        }\r\n        console.log(\"Socket io Client Access \", data);\r\n      });\r\n\r\n      socket.on(\"area\", function (data) {\r\n        if (data.message == \"add\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            addAreaSuccess(data.data.area)\r\n          );\r\n        }\r\n        if (data.message == \"edit\") {\r\n          if (\r\n            props.currentArea &&\r\n            props.currentArea._id === data.data.area._id\r\n          ) {\r\n            checkAnoUserAction(\r\n              data.data.room._id,\r\n              data.data.actionBy,\r\n              updateAreaSuccess(data.data.area)\r\n            );\r\n          }\r\n        }\r\n        if (data.message == \"delete\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            deleteAreaSuccess(data.data.area._id)\r\n          );\r\n        }\r\n        if (data.message == \"add-monitor\") {\r\n          if (props.currentArea && props.currentArea._id === data.data.area._id)\r\n            checkAnoUserAction(\r\n              data.data.room._id,\r\n              data.data.actionBy,\r\n              addMonitorSuccess(data.data.monitors)\r\n            );\r\n        }\r\n        if (data.message == \"edit-monitor\") {\r\n          if (props.currentArea && props.currentArea._id === data.data.area._id)\r\n            checkAnoUserAction(\r\n              data.data.room._id,\r\n              data.data.actionBy,\r\n              updateMonitorSuccess(data.data.monitor)\r\n            );\r\n        }\r\n        if (data.message == \"switch-monitor\") {\r\n          if (props.currentArea && props.currentArea._id === data.data.area._id)\r\n            checkAnoUserAction(\r\n              data.data.room._id,\r\n              data.data.actionBy,\r\n              updateMonitorSuccess(data.data.monitor)\r\n            );\r\n        }\r\n        if (data.message == \"delete-monitor\") {\r\n          if (props.currentArea && props.currentArea._id === data.data.area._id)\r\n            checkAnoUserAction(\r\n              data.data.room._id,\r\n              data.data.actionBy,\r\n              deleteMonitorSuccess(data.data.monitors)\r\n            );\r\n        }\r\n        console.log(\"Socket io Client Area Info\", data);\r\n      });\r\n\r\n      socket.on(\"activate\", function (data) {\r\n        if (data.message == \"add\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            addActivateSuccess(data.data.activate)\r\n          );\r\n        }\r\n        if (data.message == \"delete\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            deleteActivateSuccess(data.data.activate._id)\r\n          );\r\n        }\r\n\r\n        console.log(\"Socket io Client Activate \", data);\r\n      });\r\n\r\n      socket.on(\"room\", function (data) {\r\n        if (data.message == \"edit\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            updateRoomSuccess(data.data.room)\r\n          );\r\n        }\r\n        if (data.message == \"delete\") {\r\n          socket.emit(\"leave-room\", \"room\" + data.data.room._id);\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            deleteRoomSuccess(data.data.room._id)\r\n          );\r\n        }\r\n\r\n        console.log(\"Socket io Room Info \", data);\r\n      });\r\n\r\n      socket.on(\"structure\", function (data) {\r\n        if (data.message == \"add\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            addSensorSuccess(data.data.structure)\r\n          );\r\n        }\r\n        if (data.message == \"update\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            updateSensorSuccess(data.data.structure)\r\n          );\r\n        }\r\n        if (data.message == \"delete\") {\r\n          checkAnoUserAction(\r\n            data.data.room._id,\r\n            data.data.actionBy,\r\n            deleteSensorSuccess(data.data.structure)\r\n          );\r\n        }\r\n\r\n        console.log(\"Socket io Client Structure \", data);\r\n      });\r\n\r\n      socket.on(\"disconnect\", function () {});\r\n    }\r\n\r\n    return () => {\r\n      if (webSocket.current) webSocket.current.disconnect();\r\n    };\r\n  }, [props.user.accessToken, props.currentRoom_id, props.currentArea]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"media user-profile mt-2 mb-2\">\r\n        <img\r\n          src={props.user.user.avatar}\r\n          className=\"avatar-sm rounded-circle mr-2\"\r\n          alt={props.user.user.username}\r\n        />\r\n        <img\r\n          src={props.user.user.avatar}\r\n          className=\"avatar-xs rounded-circle mr-2\"\r\n          alt={props.user.user.username}\r\n        />\r\n\r\n        <div className=\"media-body\">\r\n          <h6 className=\"pro-user-name mt-0 mb-0\">\r\n            {props.user.user.fullname}\r\n          </h6>\r\n          <span className=\"pro-user-desc\">{props.user.user.username}</span>\r\n        </div>\r\n\r\n        <UncontrolledDropdown className=\"align-self-center profile-dropdown-menu\">\r\n          <DropdownToggle\r\n            data-toggle=\"dropdown\"\r\n            tag=\"button\"\r\n            className=\"btn btn-link p-0 dropdown-toggle mr-0\"\r\n          >\r\n            <FeatherIcon.ChevronDown />\r\n          </DropdownToggle>\r\n          <DropdownMenu\r\n            right\r\n            className=\"topbar-dropdown-menu profile-dropdown-items\"\r\n          >\r\n            <Link to=\"/account/info\" className=\"dropdown-item notify-item\">\r\n              <FeatherIcon.User className=\"icon-dual icon-xs mr-2\" />\r\n              <span>Tài khoản</span>\r\n            </Link>\r\n            <Link to=\"/account/lock\" className=\"dropdown-item notify-item\">\r\n              <FeatherIcon.Lock className=\"icon-dual icon-xs mr-2\" />\r\n              <span>Khóa màn hình</span>\r\n            </Link>\r\n            <DropdownItem divider />\r\n            <Link to=\"/account/logout\" className=\"dropdown-item notify-item\">\r\n              <FeatherIcon.LogOut className=\"icon-dual icon-xs mr-2\" />\r\n              <span>Đăng xuất</span>\r\n            </Link>\r\n          </DropdownMenu>\r\n        </UncontrolledDropdown>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\n/**\r\n * Sidenav\r\n */\r\nconst SideNav = () => {\r\n  return (\r\n    <div className=\"sidebar-content\">\r\n      <div id=\"sidebar-menu\">\r\n        <AppMenu />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nclass LeftSidebar extends Component {\r\n  menuNodeRef;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.handleOtherClick = this.handleOtherClick.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Bind event\r\n   */\r\n  componentDidMount = () => {\r\n    document.addEventListener(\"mousedown\", this.handleOtherClick, false);\r\n  };\r\n\r\n  /**\r\n   * Bind event\r\n   */\r\n  componentWillUnmount = () => {\r\n    document.removeEventListener(\"mousedown\", this.handleOtherClick, false);\r\n  };\r\n\r\n  /**\r\n   * Handle the click anywhere in doc\r\n   */\r\n  handleOtherClick = (e) => {\r\n    if (this.menuNodeRef.contains(e.target)) return;\r\n    // else hide the menubar\r\n    if (document.body && isMobileOnly) {\r\n      document.body.classList.remove(\"sidebar-enable\");\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle click\r\n   * @param {*} e\r\n   * @param {*} item\r\n   */\r\n  handleClick(e) {\r\n    console.log(e);\r\n  }\r\n\r\n  render() {\r\n    const isCondensed = this.props.isCondensed || false;\r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          className=\"left-side-menu\"\r\n          ref={(node) => (this.menuNodeRef = node)}\r\n        >\r\n          <UserProfile {...this.props} />\r\n          {!isCondensed && (\r\n            <PerfectScrollbar>\r\n              <SideNav />\r\n            </PerfectScrollbar>\r\n          )}\r\n          {isCondensed && <SideNav />}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  const { user, loading, error } = state.Auth;\r\n  const { currentArea } = state.RoomArea;\r\n  const currentRoom_id = state.RoomList.currentRoom\r\n    ? state.RoomList.currentRoom.room._id\r\n    : null;\r\n  return { user, loading, error, currentRoom_id, currentArea };\r\n};\r\nexport default connect(mapStateToProps, {})(LeftSidebar);\r\n"],"sourceRoot":""}